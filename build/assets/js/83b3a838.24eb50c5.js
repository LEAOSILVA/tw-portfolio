"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2867],{4141:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"docs-example/scripts","title":"Scripts","description":"I design trainings accessible to both customers and employees through the company\u2019s learning platform.","source":"@site/docs/docs-example/scripts.md","sourceDirName":"docs-example","slug":"/docs-example/scripts","permalink":"/professional-portfolio/docs/docs-example/scripts","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/docs-example/scripts.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Release notes","permalink":"/professional-portfolio/docs/docs-example/release-notes"},"next":{"title":"Tutorials","permalink":"/professional-portfolio/docs/docs-example/tutorials"}}');var i=t(4848),r=t(8453);const a={sidebar_position:5},o="Scripts",l={},c=[{value:"Data transformation with JSONata",id:"data-transformation-with-jsonata",level:2}];function d(e){const n={admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"scripts",children:"Scripts"})}),"\n",(0,i.jsx)(n.p,{children:"I design trainings accessible to both customers and employees through the company\u2019s learning platform."}),"\n",(0,i.jsx)(n.p,{children:"The excerpt below comes from a training session that walks users through the creation of an integration flow, guiding them step by step from start to finish. It includes detailed configurations for each step, along with the corresponding logs and traces."}),"\n",(0,i.jsx)(n.p,{children:"While the script itself is not publicly available, it serves as a powerful tool for planning and recording the session."}),"\n",(0,i.jsxs)(n.p,{children:["For clarity, the flow steps are summarized below. We will focus on ",(0,i.jsx)(n.strong,{children:"Step 5: Data transformation with JSONata"}),"."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Order received with a REST trigger"}),(0,i.jsx)(n.br,{}),"\n","The flow starts with a POST request when an order is received, including a client identification code (",(0,i.jsx)(n.code,{children:"ClientID"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Information retrieval"}),(0,i.jsx)(n.br,{}),"\n","Additional details about the order are then fetched using the ",(0,i.jsx)(n.code,{children:"ClientID"})," as a parameter in an internal purchasing endpoint."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Data transformation with JSONata"}),(0,i.jsx)(n.br,{}),"\n","A ",(0,i.jsx)(n.strong,{children:"JSONata"})," expression is applied to structure the received data and ensure it is in the correct format for the next step."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Payment processing via an external endpoint"}),(0,i.jsx)(n.br,{}),"\n","Once the data is properly formatted, it is sent to an external endpoint to execute the payment."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Data transformation with JSONata"}),(0,i.jsx)(n.br,{}),"\n","The returned data is structured again using JSONata, preparing it for the final steps of the flow."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Status update and confirmation"}),(0,i.jsx)(n.br,{}),"\n","After payment is completed, the order status is updated in an internal endpoint to keep the system synchronized, and a payment confirmation is received."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"NOTE",type:"note",children:(0,i.jsx)(n.p,{children:"The training sessions are recorded in Portuguese. The script below is a translated version."})}),"\n",(0,i.jsx)(n.h2,{id:"data-transformation-with-jsonata",children:"Data transformation with JSONata"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Structure & Objectives"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Demonstrate how to add and configure JSONata"}),"\n",(0,i.jsx)(n.li,{children:"Check logs and traces"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Hi, everyone!",(0,i.jsx)(n.br,{}),"\n","In this step, we will perform another data transformation using JSONata."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Body transformation with JSONata"})}),"\n",(0,i.jsxs)(n.p,{children:["We will add a ",(0,i.jsx)(n.strong,{children:"SetBody"})," step to combine the result of the payment processing with the ",(0,i.jsx)(n.strong,{children:"ClientID"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["To redefine the message body, we will select the ",(0,i.jsx)(n.strong,{children:"Simple"})," language again in the expression field, which allows referencing headers, properties, the message body, and performing simple operations such as concatenation, conditions, and transformations."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'- setBody:\n         expression:\n           simple:\n             expression: \'{"ClientID": "${exchangeProperty.ClientID}", "status":${body}}\'\n'})}),"\n",(0,i.jsx)(n.p,{children:"Essentially, we are creating a JSON that combines:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ClientID stored in the ",(0,i.jsx)(n.code,{children:"ClientID"})," property, and"]}),"\n",(0,i.jsx)(n.li,{children:"The status coming from the original body."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Adding a log step"})}),"\n",(0,i.jsx)(n.p,{children:"Next, we add a Log step to record the result of the combined information, using the prefix \u201cConcatenation\u201d to indicate that the body data has been concatenated."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"     - log:\n         message: CONCATENATION - ${body}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Creating a resource"})}),"\n",(0,i.jsxs)(n.p,{children:["In the Source Code tab, we will create a resource with the transformation instructions, which will be called ",(0,i.jsx)(n.code,{children:"statusPayload.jsonata"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"+"})," next to \u201cResources\u201d and add the transformation instructions:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "ClientID":ClientID,\n    "Status":status.status\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This JSONata expression creates a new JSON object by extracting and organizing values from the original JSON."}),"\n",(0,i.jsx)(n.p,{children:"For example, if the original JSON is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ClientID": "1",\n  "status": {\n    "status": "Paid"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"The JSONata expression produces the following result:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ClientID": "1",\n  "Status": "Paid"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In other words, the expression simply reorganizes the data, keeping the ",(0,i.jsx)(n.code,{children:"ClientID"})," and extracting the status field from a nested object."]}),"\n",(0,i.jsxs)(n.p,{children:["We assign the name and extension ",(0,i.jsx)(n.code,{children:"statusPayload.jsonata"})," and save the file."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Using the JSONata component"})}),"\n",(0,i.jsx)(n.p,{children:"After creating the resource with the transformation instructions, we will create a step using the JSONata component."}),"\n",(0,i.jsxs)(n.p,{children:["Remember that the ",(0,i.jsx)(n.code,{children:"statusPayload.jsonata"})," file is referenced in the ",(0,i.jsx)(n.code,{children:"classpath"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Adding another log step"})}),"\n",(0,i.jsx)(n.p,{children:"Now we add a Log step to record the body from the previous step, using the prefix status payload."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"     - log:\n         message: 'PAYLOAD STATUS - ${body}'\n\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Checking logs and traces"})}),"\n",(0,i.jsx)(n.p,{children:"Finally, we will check the logs and traces for this step."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"In the traces, we can see information related to the product and the JSONata step."}),"\n",(0,i.jsxs)(n.li,{children:["In the logs, we can see:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The result of the concatenation between ClientID and the payment processing data."}),"\n",(0,i.jsxs)(n.li,{children:["Then, we can see the transformed payment data recorded with the prefix ",(0,i.jsx)(n.code,{children:"PAYLOAD STATUS"}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);